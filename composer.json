{
  "name": "AUShealth/saas",
  "description": "A develop container for Australian government department of health SaaS websites.",
  "license": "MIT",
  "authors": [
    {
      "name": "Joshua Li",
      "email": "joshua@lirujia.com"
    }
  ],
  "type": "project",
  "require": {
    "rujiali/acquia-site-factory-cli": "dev-master",
    "drush/drush": "^8.1",
    "wikimedia/composer-merge-plugin": "^1.4.0",
    "composer/installers": "^1.0.20"
  },
  "repositories": [
    {
      "type": "vcs",
      "url": "https://github.com/rujiali/acquia-site-factory-cli"
    }
  ],
  "require-dev": {
    "beet/box": "^0.6.5"
  },
  "scripts": {
    "backup": [
      "vendor/bin/AcquiaSiteFactoryCli app:createBackup"
    ],
    "download": [
      "mkdir backup",
      "wget -O ./backup/backup.tar.gz $(vendor/bin/AcquiaSiteFactoryCli app:getLatestBackupURL)",
      "cd backup && tar -zxvf backup.tar.gz",
      "mv ./backup/docroot ./",
      "mv ./backup/database.sql ./",
      "rm -rf ./backup",
      "chmod 777 ./docroot/sites/default/files"
    ],
    "import": [
      "vagrant ssh -c 'cd /var/beetbox; mysql beetbox < ./database.sql -u beetbox -pbeetbox'",
      "rm -rf database.sql",
      "cp settings.php ./docroot/sites/default/",
      "composer resetdb",
      "cd ./docroot/sites/default/themes; rm -rf site; git clone https://github.com/healthgovau/healthgovau-campaigns.git; mv ./heathgovau-campaigns ./site"
    ],
    "importdb": [
      "composer backup",
      "sleep 1m",
      "rm -rf backup; mkdir backup",
      "wget -O ./backup/backup.tar.gz $(vendor/bin/AcquiaSiteFactoryCli app:getLatestBackupURL)",
      "cd backup && tar -zxvf backup.tar.gz",
      "mv ./backup/database.sql ./",
      "cp -R ./backup/docroot/sites/default/files/* ./docroot/sites/default/files/",
      "rm -rf ./backup",
      "vagrant ssh -c 'cd /var/beetbox; mysql beetbox < ./database.sql -u beetbox -pbeetbox'",
      "rm -rf database.sql",
      "composer resetdb"
    ],
    "resetdb": [
      "composer cc",
      "drush @govCMS-SaaS-vagrant.local user-unblock 1",
      "drush @govCMS-SaaS-vagrant.local uli",
      "drush @govCMS-SaaS-vagrant.local -q vset cache 0",
      "drush @govCMS-SaaS-vagrant.local -q vset preprocess_css 0",
      "drush @govCMS-SaaS-vagrant.local -q vset preprocess_js 0",
      "drush @govCMS-SaaS-vagrant.local -q vset page_cache_maximum_age 0",
      "drush @govCMS-SaaS-vagrant.local -q vset views_skip_cache TRUE",
      "drush @govCMS-SaaS-vagrant.local -q vset -y error_level 2",
      "drush @govCMS-SaaS-vagrant.local dis -y govcms_tweaks, clamav, acsf, acsf_duplication, acsf_openid, acsf_theme, acsf_variables, acsf_pingdom, shield",
      "composer cc"
    ],
    "cc": [
      "drush @govCMS-SaaS-vagrant.local cc all'"
    ],
    "ccsite": [
      "vendor/bin/AcquiaSiteFactoryCli app:clearCache"
    ],
    "uli": [
      "drush @govCMS-SaaS-vagrant.local uli'"
    ]
  }
}
